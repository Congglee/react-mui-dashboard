---
globs: react-router.config.ts, app/routes/**, app/root.tsx, app/routes.ts, app/**/layout.tsx, app/**/index.tsx
description: React Router v7 Framework Mode — prioritize Context7 MCP or web research for up-to-date guidance.
---

### React Router v7 Framework Mode — Research-First Policy

When handling anything related to React Router V7 in "Framework Mode" in this repository, follow a research-first workflow to ensure instructions and code changes are based on the latest authoritative information.

- **Scope (when to apply)**: Any question, bug, migration, refactor, or feature involving React Router v7 or the term "Framework Mode".

- **Primary sources to use (in order)**:
  1. Context7 MCP Server: Resolve and fetch the latest official React Router documentation.
  2. Web research: If Context7 is unavailable or insufficient, search authoritative sources and cite them.
  3. Local notes in this repo: Cross-check conclusions with internal docs.

### Required Workflow

1. Use Context7 MCP

- Resolve the library ID for React Router (e.g., by querying "react-router" or "remix-run/react-router").
- Fetch docs focused on: "Framework Mode", "v7", "file-based routing", "data APIs", "loaders", "actions", "defer", "streaming", and "migration".
- Prefer official docs, release notes, and RFCs.

2. Fall back to Web Research

- If Context7 lacks coverage or seems outdated, perform web research.
- Prefer official docs and primary sources. Include short citations in responses when external info is used.

3. Validate Code Touchpoints in This Repo

- Router config: [react-router.config.ts](mdc:react-router.config.ts)
- Root app shell: [app/root.tsx](mdc:app/root.tsx)
- Routing helpers/registry (if used): [app/routes.ts](mdc:app/routes.ts)
- Route files (file-based routing): [app/routes](mdc:app/routes)
- Example layout file: [app/routes/dashboard/layout.tsx](mdc:app/routes/dashboard/layout.tsx)

### Guidance for Agents

- Always verify API names and patterns against the latest docs before editing.
- Prefer v7-endorsed patterns; call out any migrations or breaking changes in notes.
- When answering, provide concise citations/links for any external information used.
- Only proceed with edits after confirming the approach via Context7 or current web sources.

### Quick Workflow Snippet

- "Topic touches React Router v7 Framework Mode → fetch latest docs via Context7; if needed, do web research and cite. Then implement or adjust in `react-router.config.ts` and relevant `app/routes/**` files according to findings."
